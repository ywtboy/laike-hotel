(function(e){function t(t){for(var r,a,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)a=i[u],n[a]&&d.push(n[a][0]),n[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,a=1;a<o.length;a++){var i=o[a];0!==n[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=o[0]))}return e}var r={},a={app:0},n={app:0},s=[];function i(e){return c.p+"js/"+({guest:"guest",login:"login","order~roomState":"order~roomState",order:"order",roomState:"roomState",overview:"overview",report:"report",setting:"setting"}[e]||e)+"."+{"chunk-2d0e5e97":"22e83d67",guest:"637ccbb1",login:"954f7523","order~roomState":"0c4809cd",order:"253bb1dd",roomState:"06000bde",overview:"316e31a1",report:"31bca27c",setting:"61ec8b3d"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(e){var t=[],o={"order~roomState":1,order:1,roomState:1};a[e]?t.push(a[e]):0!==a[e]&&o[e]&&t.push(a[e]=new Promise(function(t,o){for(var r="css/"+({guest:"guest",login:"login","order~roomState":"order~roomState",order:"order",roomState:"roomState",overview:"overview",report:"report",setting:"setting"}[e]||e)+"."+{"chunk-2d0e5e97":"31d6cfe0",guest:"31d6cfe0",login:"31d6cfe0","order~roomState":"2305a25d",order:"fe2b785c",roomState:"ee19852a",overview:"31d6cfe0",report:"31d6cfe0",setting:"31d6cfe0"}[e]+".css",n=c.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===n))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===r||u===n)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||n,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete a[e],p.parentNode.removeChild(p),o(s)},p.href=n;var m=document.getElementsByTagName("head")[0];m.appendChild(p)}).then(function(){a[e]=0}));var r=n[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise(function(t,o){r=n[e]=[t,o]});t.push(r[2]=s);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e),l=function(t){u.onerror=u.onload=null,clearTimeout(d);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");s.type=r,s.request=a,o[1](s)}n[e]=void 0}};var d=setTimeout(function(){l({type:"timeout",target:u})},12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(o,r,function(t){return e[t]}.bind(null,r));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/m/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var p=u;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"26c6":function(e,t,o){"use strict";o.d(t,"a",function(){return n});var r=o("5834");const a="/api/handover",n=()=>{return r["a"].get(a+"/duty")}},4360:function(e,t,o){"use strict";var r=o("2b0e"),a=o("2f62");const n={state:{snackbar:!1,text:"消息提示",color:"info",timeout:2500},getters:{},mutations:{setSnackbar(e,t){e.snackbar=t.snackbar,e.text=t.text?t.text:e.text,e.color=t.color?t.color:e.color,e.timeout=t.timeout?t.timeout:e.timeout}},actions:{msg(e,t){e.commit("setSnackbar",!0)}}};var s=n,i=o("5834");const c="/api",l=e=>{return i["a"].post(c+"/login",e)},u=()=>{return i["a"].get(c+"/currUser")},d=()=>{return i["a"].get(c+"/logout")};var p=o("a18c"),m=o("d5b3");const h={state:{currUser:null,isLogin:0,currHotel:{}},getters:{},mutations:{login(e,t){e.isLogin+=1,e.currUser=t,e.currHotel=t.currHotel},logout(e){e.isLogin=0,e.currUser={},e.currHotel={}},setIsLogin(e){e.isLogin=!1}},actions:{login(e,t){l(t).then(t=>{if(0===t.data.code){let o=t.data.data;e.commit("login",o),m["a"].success("登录成功"),p["a"].push("/report/overview")}else m["a"].error(t.data.code+"："+t.data.msg),console.log(t.data.code+"："+t.data.msg)})},logout(e){d().then(t=>{0===t.data.code?(e.commit("logout"),m["a"].success("退出系统成功"),p["a"].push("/login")):console.log(t.data.code+"："+t.data.msg)})},currUser(e){u().then(t=>{if(0===t.data.code){let o=t.data.data;e.commit("login",o)}else console.log(t.data.code+"："+t.data.msg)})}}};var g=h;o("ac6a");const f="/api/roomState/",v=()=>{return i["a"].get(f)},b={state:{rooms:null},getters:{roomNum:e=>{let t={};return t.total=e.rooms?e.rooms.length:0,t.vacant=0,t.rented=0,t.dirty=0,t.repair=0,t.occupancy=0,e.rooms&&(e.rooms.forEach(e=>{"vacant"===e.roomState&&t.vacant++,"rented"!==e.roomState&&"rented_hour"!==e.roomState||t.rented++,"dirty"===e.roomState&&t.dirty++,"repair"===e.roomState&&t.repair++}),t.occupancy=Math.round(t.rented/t.total*1e4)/100+"%"),t}},mutations:{setRooms(e,t){e.rooms=t}},actions:{getRooms(e){v().then(t=>{if(0===t.data.code){let o=t.data.data;e.commit("setRooms",o)}else console.log(t.data.code+"："+t.data.msg)})}}};var w=b;const y=e=>{return i["a"].get("/api/dicCommon/"+e)},_={state:{dictionaries:null,roomState:null,channel:null,pay_type:null,pay_method:null,consume_item:null,income_class:null,order_ctate_code:null},getters:{getText:e=>(t,o)=>{return o&&e[t]?e[t].filter(e=>o===e.dicCommonCode)[0].dicCommonName:""}},mutations:{setDictionaries(e,t){e.setDictionaries=t},roomState(e,t){e.roomState=t},channel(e,t){e.channel=t},pay_type(e,t){e.pay_type=t},pay_method(e,t){e.pay_method=t},consume_item(e,t){e.consume_item=t},income_class(e,t){e.income_class=t},order_ctate_code(e,t){e.order_ctate_code=t}},actions:{getDicByType(e,t){y(t).then(o=>{if(0===o.data.code){let r=o.data.data;e.commit(t,r)}else console.log(o.data.code+"："+o.data.msg)})}}};var k=_;const T={state:{currTitle:"来客酒店云管家"},getters:{},mutations:{setCurrTitle(e,t){e.currTitle=t||e.currTitle}},actions:{}};var S=T;r["a"].use(a["a"]);t["a"]=new a["a"].Store({modules:{message:s,user:g,room:w,dictionary:k,sysConfig:S}})},"56d7":function(e,t,o){"use strict";o.r(t);var r=o("2b0e"),a=(o("d1e7"),o("bb71")),n=(o("da64"),o("5025")),s=o.n(n);r["a"].use(a["a"],{iconfont:"md",lang:{locales:{zhHans:s.a},current:"zh-Hans"}});var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view"),o("v-snackbar",{attrs:{timeout:e.timeout,color:e.color,top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.text)+"\n    "),o("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.snackbar=!1}}},[e._v("\n      Close\n    ")])],1),o("div",{attrs:{id:"msg"}})],1)},c=[],l=o("be94"),u=o("2f62"),d={name:"App",data(){return{}},computed:Object(l["a"])({snackbar:{get(){return this.$store.state.message.snackbar},set(e){this.setSnackbar(e)}}},Object(u["e"])({text:e=>e.message.text,color:e=>e.message.color,timeout:e=>e.message.timeout})),beforeCreate(){},methods:Object(l["a"])({},Object(u["d"])(["setSnackbar"]))},p=d,m=(o("7faf"),o("2877")),h=o("6544"),g=o.n(h),f=o("8336"),v=o("2db4"),b=Object(m["a"])(p,i,c,!1,null,null,null),w=b.exports;g()(b,{VBtn:f["a"],VSnackbar:v["a"]});var y=o("a18c"),_=o("4360"),k=o("d5b3");r["a"].config.productionTip=!1,r["a"].prototype.$Msg=k["a"],new r["a"]({router:y["a"],store:_["a"],render:e=>e(w)}).$mount("#app")},5834:function(e,t,o){"use strict";o("ac6a");var r=o("be94"),a=o("bc3a"),n=o.n(a),s=o("4360"),i=o("a18c"),c=o("d5b3");n.a.interceptors.request.use(e=>{e.params=Object(r["a"])({},e.params,{_t:(new Date).getTime()});let t=e.url;if("get"===e.method&&e.params){t+="?";let o=Object.keys(e.params);for(let r of o)null!==e.params[r]&&""!==e.params[r]&&(t+=`${r}=${encodeURIComponent(e.params[r])}&`);t=t.substring(0,t.length-1),e.params={}}return e.url=t,e},function(e){return Promise.reject(e)}),n.a.interceptors.response.use(function(e){return e},function(e){var t=e.response.status;if(200!==t)switch(t){case 400:console.log("请求错误400"),c["a"].info("请求错误！");break;case 401:console.log(101111),c["a"].error("请登录"),s["a"].commit("setIsLogin"),i["a"].push("/login"),console.log(i["a"]);break;case 402:c["a"].info("您的系统已到期，请联系续期");break;case 403:console.log("无权限！"),c["a"].error("没有权限");break;case 404:console.log("资源不存在"),c["a"].error("资源不存在！");break;case 500:console.log("服务器内部错误！"),c["a"].error("服务器内部错误！");break;default:console.log("网络错误 ： "+t),c["a"].error("网络错误 ： "+t)}return Promise.reject(e)}),t["a"]=n.a},"7faf":function(e,t,o){"use strict";var r=o("882c"),a=o.n(r);a.a},"882c":function(e,t,o){},a18c:function(e,t,o){"use strict";var r=o("2b0e"),a=o("8c4f"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{directives:[{name:"touch",rawName:"v-touch",value:{left:function(){return e.swipe("Left")},right:function(){return e.swipe("Right")},up:function(){return e.swipe("Up")},down:function(){return e.swipe("Down")}},expression:"{\n    left: () => swipe('Left'),\n    right: () => swipe('Right'),\n    up: () => swipe('Up'),\n    down: () => swipe('Down')\n  }"}]},[o("v-navigation-drawer",{attrs:{app:"",width:"150",temporary:"","disable-resize-watcher":!1,touchless:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[o("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[o("v-list",{staticClass:"pa-0"},[o("v-list-tile",[o("v-list-tile-content",[o("v-list-tile-title",[o("div",[e._v(e._s(e.currHotel.hotelName))])])],1)],1)],1)],1),o("v-list",e._l(e.drawerItems,function(t){return o("v-list-tile",{key:t.title,attrs:{to:t.to},on:{click:function(e){}}},[o("v-list-tile-action",[o("v-icon",[e._v(e._s(t.icon))])],1),o("v-list-tile-content",[o("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)}),1),o("center",[o("a",{attrs:{href:"/"}},[e._v("访问电脑版")])])],1),o("v-toolbar",{attrs:{app:""}},[o("v-toolbar-side-icon",{staticClass:"hidden-sm-and-up",on:{click:function(t){e.drawer=!e.drawer}}}),o("v-toolbar-title",[o("div",{staticClass:"hidden-sm-and-up"},[e._v(e._s(e.currTitle))]),o("span",{staticClass:"hidden-sm-and-down"},[e._v("来客酒店云管家    ")]),o("span",{staticClass:"hidden-xs-only"},[e._v(e._s(e.currHotel.hotelName))])]),o("v-spacer"),o("v-toolbar-items",{staticClass:"hidden-xs-only"},e._l(e.drawerItems,function(t,r){return o("v-btn",{key:r,attrs:{to:t.to,flat:""}},[e._v(e._s(t.title))])}),1),o("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("v-avatar",e._g({directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{color:"red",size:"32"}},r),[o("span",{staticClass:"white--text headline"},[e._v(e._s(e.headText))])])]}}])},[o("v-list",[o("v-list-tile",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(e){e.stopPropagation()}}},[o("v-list-tile-title",[e._v("修改密码")])],1),o("v-list-tile",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(t){t.stopPropagation(),e.collect.cashType="out",e.collect.show=!0}}},[o("v-list-tile-title",[e._v("财务收账")])],1),o("v-list-tile",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:function(t){t.stopPropagation(),e.collect.cashType="in",e.collect.show=!0}}},[o("v-list-tile-title",[e._v("添加备用金")])],1),o("v-list-tile",{directives:[{name:"ripple",rawName:"v-ripple"}],on:{click:e.logout}},[o("v-list-tile-title",[e._v("退出系统")])],1)],1)],1)],1),o("v-content",[o("router-view")],1),o("Collect",{attrs:{show:e.collect.show,"cash-type":e.collect.cashType},on:{"collect-close":function(t){e.collect.show=!1}}}),o("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.showTop,expression:"showTop"}],attrs:{color:"primary",dark:"",fab:"",fixed:"",bottom:"",right:""},on:{click:function(t){return e.$vuetify.goTo(0)}}},[e._v("\n    返回顶部\n  ")])],1)},s=[],i=o("be94"),c=o("2f62"),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",{},[e._v(e._s(e.title)+" -- 当前现金："+e._s(e.onDutyInfo?e.onDutyInfo.currentCash:"0")+" 元\n        ")])]),o("v-card-text",[o("v-form",{ref:"collectForm"},[o("v-text-field",{attrs:{rules:[function(e){return!!e||"收账金额不能为空"},function(e){return e>0||"收账金额不能小于0"}],label:e.cashLabel,type:"number"},model:{value:e.collect.flowMoney,callback:function(t){e.$set(e.collect,"flowMoney",t)},expression:"collect.flowMoney"}}),o("v-text-field",{attrs:{rules:[function(e){return!!e||"密码不能为空"}],label:"密码",type:"password"},model:{value:e.collect.userPwd,callback:function(t){e.$set(e.collect,"userPwd",t)},expression:"collect.userPwd"}})],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v("取消")]),o("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"blue darken-1",flat:""},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)],1)},u=[],d=o("5834");const p="/api/finance",m=e=>{return d["a"].post(p+"/collect",e)},h=e=>{return d["a"].post(p+"/addCash",e)};var g=o("26c6"),f={name:"Collect",props:{show:Boolean,cashType:String},data(){return{dialog:!1,loading:!1,title:"财务收账",cashLabel:"收账金额",collect:{flowMoney:"",userPwd:""},onDutyInfo:null}},watch:{show(e){this.dialog=e},dialog(e){e?("out"===this.cashType?(this.title="财务收账",this.cashLabel="收账金额"):"in"===this.cashType&&(this.title="添加备用金",this.cashLabel="备用金金额"),this.getOnDutyInfo()):(this.$emit("collect-close"),this.$refs.collectForm.reset())}},methods:{submit(){this.$refs.collectForm.validate()&&(this.loading=!0,"out"===this.cashType&&m(this.collect).then(e=>{0===e.data.code?(this.$Msg.success("收账成功"),this.dialog=!1):this.$Msg.error(e.data.code+"："+e.data.msg),this.loading=!1}),"in"===this.cashType&&h(this.collect).then(e=>{0===e.data.code?(this.$Msg.success("添加备用金成功"),this.dialog=!1):this.$Msg.error(e.data.code+"："+e.data.msg),this.loading=!1}))},getOnDutyInfo(){Object(g["a"])().then(e=>{0===e.data.code?this.onDutyInfo=e.data.data:this.$Msg.error(e.data.code+"："+e.data.msg)})}}},v=f,b=o("2877"),w=o("6544"),y=o.n(w),_=o("8336"),k=o("b0af"),T=o("99d9"),S=o("12b2"),x=o("169a"),C=o("4bd4"),V=o("9910"),j=o("2677"),O=Object(b["a"])(v,l,u,!1,null,null,null),$=O.exports;y()(O,{VBtn:_["a"],VCard:k["a"],VCardActions:T["a"],VCardText:T["b"],VCardTitle:S["a"],VDialog:x["a"],VForm:C["a"],VSpacer:V["a"],VTextField:j["a"]});o("5118");var L={name:"",components:{Collect:$},data(){return{drawer:!1,drawerItems:[{title:"房态",icon:"home",to:"/roomState"},{title:"订单",icon:"event",to:"/order"},{title:"客人",icon:"assignment_ind",to:"/guest"},{title:"报表",icon:"table_chart",to:"/report/overview"},{title:"设置",icon:"settings",to:"/setting"}],collect:{show:!1,cashType:"out"},menu:!1,scrollTop:0}},computed:Object(i["a"])({headText(){return this.currUser&&this.currUser.realName?this.currUser.realName.charAt(0):"囧"},breakpoint(){return this.$vuetify.breakpoint.name},showTop(){return this.scrollTop>200}},Object(c["e"])({isLogin:e=>e.user.isLogin,isFirst:e=>e.user.isFirst,currUser:e=>e.user.currUser,currHotel:e=>e.user.currHotel,currTitle:e=>e.sysConfig.currTitle})),watch:{breakpoint(e){"xs"!=e&&(this.drawer=!1)}},mounted(){"/"===this.$route.path&&this.$router.push("report"),this.getRooms(),this.getDicByType("pay_method"),window.addEventListener("scroll",this.getScrpllTop)},methods:Object(i["a"])({swipe(e){console.log(1),console.log(this.$vuetify),"Right"==e&&(this.drawer=!0)},snackbar(){console.log("sads")},getScrpllTop(){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}},Object(c["b"])({getRooms:"getRooms",getDicByType:"getDicByType",logout:"logout"}))},P=L,N=o("7496"),D=o("8212"),M=o("549c"),E=o("132d"),I=o("8860"),U=o("ba95"),B=o("40fe"),R=o("5d23"),A=o("e449"),H=o("f774"),F=o("71d9"),z=o("2a7f"),q=o("706c"),J=o("269a"),Y=o.n(J),G=o("3ccf"),K=o("c341"),Q=Object(b["a"])(P,n,s,!1,null,null,null),W=Q.exports;y()(Q,{VApp:N["a"],VAvatar:D["a"],VBtn:_["a"],VContent:M["a"],VIcon:E["a"],VList:I["a"],VListTile:U["a"],VListTileAction:B["a"],VListTileContent:R["a"],VListTileTitle:R["c"],VMenu:A["a"],VNavigationDrawer:H["a"],VSpacer:V["a"],VToolbar:F["a"],VToolbarItems:z["a"],VToolbarSideIcon:q["a"],VToolbarTitle:z["b"]}),Y()(Q,{Ripple:G["a"],Touch:K["a"]});var X=[{path:"/",name:"hotel",component:W,children:[{path:"/login",name:"登录",component:()=>o.e("login").then(o.bind(null,"a55b"))},{path:"roomState",name:"房态",meta:{auth:!0},component:()=>Promise.all([o.e("order~roomState"),o.e("roomState")]).then(o.bind(null,"a855"))},{path:"order",name:"订单",meta:{auth:!0},component:()=>Promise.all([o.e("order~roomState"),o.e("order")]).then(o.bind(null,"cf2a"))},{path:"guest",name:"客人",meta:{auth:!0},component:()=>o.e("guest").then(o.bind(null,"0c8c"))},{path:"report",name:"报表",meta:{auth:!0},component:()=>o.e("report").then(o.bind(null,"762c")),children:[{path:"overview",name:"营业概览",meta:{auth:!0},component:()=>o.e("overview").then(o.bind(null,"dfd9"))}]},{path:"setting",name:"设置",meta:{auth:!0},component:()=>o.e("setting").then(o.bind(null,"4ef5"))}]},{path:"*",name:"404",component:()=>o.e("chunk-2d0e5e97").then(o.bind(null,"9703"))}],Z=o("4360");r["a"].use(a["a"]);const ee=new a["a"]({routes:X});ee.beforeEach((e,t,o)=>{e.meta.auth&&!1!==e.meta.auth&&!Z["a"].state.user.currUser?(Z["a"].dispatch("currUser"),o()):o()}),ee.afterEach((e,t)=>{Z["a"].commit("setCurrTitle",e.name||null)});t["a"]=ee},d5b3:function(e,t,o){"use strict";var r=o("4360");const a={open(e,t){switch(t.snackbar=!0,e){case"success":t.color="success";break;case"error":t.color="error";break;case"warning":t.color="warning";break;case"loading":t.color="loading";break;default:break}r["a"].commit("setSnackbar",t)},success(e){this.open("success",{text:e})},error(e){this.open("error",{text:e})},info(e){this.open("info",{text:e})},warning(e){this.open("warning",{text:e})},loading(e){this.open("loading",{text:e})}};t["a"]=a}});
//# sourceMappingURL=app.f75d4e18.js.map