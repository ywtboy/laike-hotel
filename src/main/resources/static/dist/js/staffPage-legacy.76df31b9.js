(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["staffPage"],{"5d6b":function(e,t,a){var r=a("e53d").parseInt,s=a("a1ce").trim,o=a("e692"),n=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var a=s(String(e),3);return r(a,t>>>0||(n.test(a)?16:10))}:r},7445:function(e,t,a){var r=a("63b6"),s=a("5d6b");r(r.G+r.F*(parseInt!=s),{parseInt:s})},a1ce:function(e,t,a){var r=a("63b6"),s=a("25eb"),o=a("294c"),n=a("e692"),f="["+n+"]",l="​",i=RegExp("^"+f+f+"*"),u=RegExp(f+f+"*$"),d=function(e,t,a){var s={},f=o(function(){return!!n[e]()||l[e]()!=l}),i=s[e]=f?t(c):n[e];a&&(s[a]=i),r(r.P+r.F*f,"String",s)},c=d.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(i,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b9e9:function(e,t,a){a("7445"),e.exports=a("584a").parseInt},ce06:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"10px"}},[a("div",[a("Row",[a("Col",{attrs:{span:18}},[e._v(" ")]),a("Col",{attrs:{span:6,align:"right"}},[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info"},on:{click:function(t){e.staffModal=!0}}},[e._v("\n        添加员工\n      ")])],1)],1)],1),a("div",[a("Table",{attrs:{columns:e.staffCol,data:e.staffs,stripe:"",loading:!1},scopedSlots:e._u([{key:"role",fn:function(t){var r=t.row;return e._l(r.roles,function(t,r){return a("a",{key:r},[e._v("\n            "+e._s(e._f("rolesFilter")(t,e.rolesList))+"\n        ")])})}},{key:"action",fn:function(t){t.row;return[a("Button",{attrs:{type:"error",size:"small"}},[e._v("锁定")])]}}])})],1),a("Modal",{attrs:{width:"400","mask-closable":!1,title:"添加员工"},on:{"on-visible-change":function(t){return e.openOrClose(t)}},model:{value:e.staffModal,callback:function(t){e.staffModal=t},expression:"staffModal"}},[a("Form",{ref:"staffForm",attrs:{model:e.staff,rules:e.staffRule}},[a("FormItem",{attrs:{prop:"realName"}},[a("Input",{attrs:{size:"large",placeholder:"真实姓名"},model:{value:e.staff.realName,callback:function(t){e.$set(e.staff,"realName",t)},expression:"staff.realName"}})],1),a("FormItem",{attrs:{prop:"mobileNum"}},[a("Input",{attrs:{size:"large",placeholder:"手机号"},model:{value:e.staff.mobileNum,callback:function(t){e.$set(e.staff,"mobileNum",t)},expression:"staff.mobileNum"}})],1),a("FormItem",{attrs:{prop:"userSex"}},[a("RadioGroup",{attrs:{size:"large"},model:{value:e.staff.userSex,callback:function(t){e.$set(e.staff,"userSex",t)},expression:"staff.userSex"}},[a("Radio",{attrs:{label:"male"}},[e._v("男")]),a("Radio",{attrs:{label:"female"}},[e._v("女")])],1)],1),a("FormItem",{attrs:{prop:"roles"}},[a("Select",{attrs:{multiple:"",placeholder:"选择权限角色",size:"large"},model:{value:e.staff.roles,callback:function(t){e.$set(e.staff,"roles",t)},expression:"staff.roles"}},e._l(e.rolesList,function(t){return a("Option",{key:t.role,attrs:{value:t.id}},[e._v(e._s(t.roleName))])}),1)],1),a("FormItem",{attrs:{prop:"userPwd"}},[a("Input",{attrs:{size:"large",type:"password",prefix:"md-lock",placeholder:"请本人输入新密码"},model:{value:e.staff.userPwd,callback:function(t){e.$set(e.staff,"userPwd",t)},expression:"staff.userPwd"}})],1),a("FormItem",{attrs:{prop:"userPwd2"}},[a("Input",{attrs:{size:"large",type:"password",prefix:"md-lock",placeholder:"请再次输入新密码"},model:{value:e.staff.userPwd2,callback:function(t){e.$set(e.staff,"userPwd2",t)},expression:"staff.userPwd2"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large"},on:{click:function(t){e.staffModal=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"primary",size:"large",loading:e.staffLoad},on:{click:e.staffSubmit}},[e._v("确定")])],1)],1)],1)},s=[],o=a("e814"),n=a.n(o),f=a("7f43"),l=a.n(f),i="/api/permission",u=function(){return l.a.get(i+"/hotelRole")},d="/api/user",c=function(e){return l.a.post(d,e)},p=function(){return l.a.get(d)},m={name:"StaffPage",filters:{rolesFilter:function(e,t){var a=t.filter(function(t){return n()(e)==t.id});return a&&0!==a.length?a[0].roleName:""}},data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.staff.userPwd2&&e.$refs.staffForm.validateField("userPwd2"),r())},a=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.staff.userPwd?r(new Error("两次密码不一样")):r()};return{staffs:[],staff:{realName:"",mobileNum:"",userSex:"",userPwd:"",userPwd2:"",roles:[]},staffModal:!1,rolesList:[],staffLoad:!1,staffRule:{realName:[{required:!0,message:"请输入真实姓名"}],mobileNum:[{required:!0,message:"请输入手机号"}],userSex:[{required:!0,message:"请选择性别"}],userPwd:[{validator:t}],userPwd2:[{validator:a}],roles:[{required:!0,message:"请选择角色"}]},staffCol:[{type:"index",title:"序号",width:60},{title:"姓名",key:"realName",width:150},{title:"手机号",key:"mobileNum",width:150},{title:"角色",slot:"role",width:250},{title:"操作",slot:"action",align:"center"}]}},mounted:function(){this.getRoles(),this.getUserList()},methods:{openOrClose:function(e){},staffSubmit:function(){var e=this;this.$refs.staffForm.validate(function(t){t&&(e.staffLoad=!0,c(e.staff).then(function(t){0===t.data.code?(e.staffModal=!1,e.staffLoad=!1,e.$Message.secuss("员工添加成功"),e.getUserList()):(e.$Message.error(t.data.code+"："+t.data.msg),e.staffLoad=!1)}))})},getUserList:function(){var e=this;p().then(function(t){0===t.data.code?e.staffs=t.data.data:e.$Message.error(t.data.code+"："+t.data.msg)})},getRoles:function(){var e=this;u().then(function(t){0===t.data.code?e.rolesList=t.data.data:e.$Message.error(t.data.code+"："+t.data.msg)})}}},g=m,v=a("2877"),w=Object(v["a"])(g,r,s,!1,null,null,null);t["default"]=w.exports},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,a){e.exports=a("b9e9")}}]);
//# sourceMappingURL=staffPage-legacy.76df31b9.js.map