{"version":3,"sources":["webpack:///./node_modules/core-js/library/modules/_parse-int.js","webpack:///./node_modules/core-js/library/modules/es6.parse-int.js","webpack:///./node_modules/core-js/library/modules/_string-trim.js","webpack:///./node_modules/core-js/library/fn/parse-int.js","webpack:///./src/components/hotel/setting/StaffPage.vue?32f2","webpack:///./src/api/permission.js","webpack:///./src/api/user.js","webpack:///src/components/hotel/setting/StaffPage.vue","webpack:///./src/components/hotel/setting/StaffPage.vue?99d8","webpack:///./src/components/hotel/setting/StaffPage.vue","webpack:///./node_modules/core-js/library/modules/_string-ws.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/parse-int.js"],"names":["$parseInt","__webpack_require__","parseInt","$trim","trim","ws","hex","module","exports","str","radix","string","String","test","$export","G","F","defined","fails","spaces","space","non","ltrim","RegExp","rtrim","exporter","KEY","exec","ALIAS","exp","FORCE","fn","P","TYPE","replace","render","_vm","this","_h","$createElement","_c","_self","staticStyle","padding","attrs","span","_v","align","margin-right","type","on","click","$event","staffModal","columns","staffCol","data","staffs","stripe","loading","scopedSlots","_u","key","ref","row","_l","item","index","_s","_f","rolesList","size","width","mask-closable","title","on-visible-change","openOrClose","model","value","callback","$$v","expression","staff","rules","staffRule","prop","placeholder","$set","label","multiple","role","id","roleName","prefix","slot","staffLoad","staffSubmit","staticRenderFns","url","getHotelRoles","axios","get","addUser","user","post","getUsers","StaffPagevue_type_script_lang_js_","name","filters","rolesFilter","val","roles","filter","r","parse_int_default","length","_this","validatePass","rule","Error","userPwd2","$refs","staffForm","validateField","validatePassCheck","userPwd","realName","mobileNum","userSex","required","message","validator","mounted","getRoles","getUserList","methods","_this2","validate","valid","user_addUser","then","res","code","$Message","secuss","error","msg","_this3","user_getUsers","_this4","permission_getHotelRoles","setting_StaffPagevue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/staffPage-legacy.76df31b9.js","sourcesContent":["var $parseInt = require('./_global').parseInt;\nvar $trim = require('./_string-trim').trim;\nvar ws = require('./_string-ws');\nvar hex = /^[-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;\n","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 18.2.5 parseInt(string, radix)\n$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });\n","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n","require('../modules/es6.parse-int');\nmodule.exports = require('../modules/_core').parseInt;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('div',[_c('Row',[_c('Col',{attrs:{\"span\":18}},[_vm._v(\" \")]),_c('Col',{attrs:{\"span\":6,\"align\":\"right\"}},[_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"info\"},on:{\"click\":function($event){_vm.staffModal = true;}}},[_vm._v(\"\\n        添加员工\\n      \")])],1)],1)],1),_c('div',[_c('Table',{attrs:{\"columns\":_vm.staffCol,\"data\":_vm.staffs,\"stripe\":\"\",\"loading\":false},scopedSlots:_vm._u([{key:\"role\",fn:function(ref){\nvar row = ref.row;\nreturn _vm._l((row.roles),function(item,index){return _c('a',{key:index},[_vm._v(\"\\n            \"+_vm._s(_vm._f(\"rolesFilter\")(item,_vm.rolesList))+\"\\n        \")])})}},{key:\"action\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('Button',{attrs:{\"type\":\"error\",\"size\":\"small\"}},[_vm._v(\"锁定\")])]}}])})],1),_c('Modal',{attrs:{\"width\":\"400\",\"mask-closable\":false,\"title\":\"添加员工\"},on:{\"on-visible-change\":function($event){return _vm.openOrClose($event)}},model:{value:(_vm.staffModal),callback:function ($$v) {_vm.staffModal=$$v},expression:\"staffModal\"}},[_c('Form',{ref:\"staffForm\",attrs:{\"model\":_vm.staff,\"rules\":_vm.staffRule}},[_c('FormItem',{attrs:{\"prop\":\"realName\"}},[_c('Input',{attrs:{\"size\":\"large\",\"placeholder\":\"真实姓名\"},model:{value:(_vm.staff.realName),callback:function ($$v) {_vm.$set(_vm.staff, \"realName\", $$v)},expression:\"staff.realName\"}})],1),_c('FormItem',{attrs:{\"prop\":\"mobileNum\"}},[_c('Input',{attrs:{\"size\":\"large\",\"placeholder\":\"手机号\"},model:{value:(_vm.staff.mobileNum),callback:function ($$v) {_vm.$set(_vm.staff, \"mobileNum\", $$v)},expression:\"staff.mobileNum\"}})],1),_c('FormItem',{attrs:{\"prop\":\"userSex\"}},[_c('RadioGroup',{attrs:{\"size\":\"large\"},model:{value:(_vm.staff.userSex),callback:function ($$v) {_vm.$set(_vm.staff, \"userSex\", $$v)},expression:\"staff.userSex\"}},[_c('Radio',{attrs:{\"label\":\"male\"}},[_vm._v(\"男\")]),_c('Radio',{attrs:{\"label\":\"female\"}},[_vm._v(\"女\")])],1)],1),_c('FormItem',{attrs:{\"prop\":\"roles\"}},[_c('Select',{attrs:{\"multiple\":\"\",\"placeholder\":\"选择权限角色\",\"size\":\"large\"},model:{value:(_vm.staff.roles),callback:function ($$v) {_vm.$set(_vm.staff, \"roles\", $$v)},expression:\"staff.roles\"}},_vm._l((_vm.rolesList),function(item){return _c('Option',{key:item.role,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.roleName))])}),1)],1),_c('FormItem',{attrs:{\"prop\":\"userPwd\"}},[_c('Input',{attrs:{\"size\":\"large\",\"type\":\"password\",\"prefix\":\"md-lock\",\"placeholder\":\"请本人输入新密码\"},model:{value:(_vm.staff.userPwd),callback:function ($$v) {_vm.$set(_vm.staff, \"userPwd\", $$v)},expression:\"staff.userPwd\"}})],1),_c('FormItem',{attrs:{\"prop\":\"userPwd2\"}},[_c('Input',{attrs:{\"size\":\"large\",\"type\":\"password\",\"prefix\":\"md-lock\",\"placeholder\":\"请再次输入新密码\"},model:{value:(_vm.staff.userPwd2),callback:function ($$v) {_vm.$set(_vm.staff, \"userPwd2\", $$v)},expression:\"staff.userPwd2\"}})],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"large\"},on:{\"click\":function($event){_vm.staffModal = false;}}},[_vm._v(\"取消\")]),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"loading\":_vm.staffLoad},on:{\"click\":_vm.staffSubmit}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\"\r\n\r\nconst url = '/api/permission';\r\n\r\n\r\nexport const getHotelRoles = () => {\r\n    return axios.get(url+\"/hotelRole\")\r\n  }","import axios from \"axios\"\r\n\r\nconst url = '/api/user';\r\n\r\nexport const addUser = user => {\r\n    return axios.post(url, user)\r\n}\r\n\r\nexport const getUsers = () => {\r\n    return axios.get(url)\r\n}","<template>\r\n  <div style=\"padding: 10px\">\r\n    <div>\r\n      <Row>\r\n        <Col :span=\"18\">&nbsp;</Col>\r\n        <!-- <Col :span=\"\"></Col> -->\r\n        <Col\r\n          :span=\"6\"\r\n          align=\"right\"\r\n        >\r\n        <Button\r\n          type=\"info\"\r\n          style=\"margin-right: 5px\"\r\n          @click=\"staffModal = true;\"\r\n        >\r\n          添加员工\r\n        </Button>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n    <div>\r\n      <Table\r\n        :columns=\"staffCol\" :data=\"staffs\" stripe :loading=\"false\">\r\n        <template slot-scope=\"{row}\" slot=\"role\">\r\n          <a v-for=\"(item, index) in row.roles\" :key=\"index\">\r\n              {{ item | rolesFilter(rolesList) }}\r\n          </a>\r\n        </template>\r\n        \r\n        <template slot-scope=\"{row}\"slot=\"action\">\r\n          <!-- <Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" >修改</Button> -->\r\n          <Button type=\"error\" size=\"small\" >锁定</Button>\r\n        </template>\r\n      </Table>\r\n    </div>\r\n\r\n    <Modal width=\"400\" :mask-closable=\"false\"\r\n      v-model=\"staffModal\" title=\"添加员工\" @on-visible-change=\"openOrClose($event)\">\r\n      <Form ref=\"staffForm\" :model=\"staff\" :rules=\"staffRule\"\r\n      >\r\n        <FormItem  prop=\"realName\">\r\n          <Input v-model=\"staff.realName\" size=\"large\" placeholder=\"真实姓名\" ></Input>\r\n        </FormItem>\r\n        <FormItem  prop=\"mobileNum\">\r\n          <Input v-model=\"staff.mobileNum\" size=\"large\" placeholder=\"手机号\" ></Input>\r\n        </FormItem>\r\n        <FormItem prop=\"userSex\">\r\n            <RadioGroup v-model=\"staff.userSex\" size=\"large\" >\r\n                <Radio label=\"male\">男</Radio>\r\n                <Radio label=\"female\">女</Radio>\r\n              </RadioGroup>\r\n        </FormItem>\r\n        <FormItem   prop=\"roles\" >\r\n          <Select v-model=\"staff.roles\" multiple  placeholder=\"选择权限角色\" size=\"large\">\r\n                <Option v-for=\"item in rolesList\" :value=\"item.id\" :key=\"item.role\">{{ item.roleName }}</Option>\r\n            </Select>\r\n        </FormItem>\r\n        <FormItem  prop=\"userPwd\">\r\n            <Input size=\"large\" type=\"password\" prefix=\"md-lock\" placeholder=\"请本人输入新密码\" \r\n            v-model=\"staff.userPwd\"></Input>\r\n        </FormItem>\r\n        <FormItem  prop=\"userPwd2\">\r\n            <Input size=\"large\" type=\"password\" prefix=\"md-lock\" placeholder=\"请再次输入新密码\" \r\n            v-model=\"staff.userPwd2\"></Input>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button size=\"large\" @click=\"staffModal = false;\">取消</Button>\r\n        <Button type=\"primary\" size=\"large\" :loading=\"staffLoad\" @click=\"staffSubmit\" >确定</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getHotelRoles } from \"@/api/permission.js\";\r\nimport { addUser, getUsers } from \"@/api/user.js\";\r\nexport default {\r\n  name: 'StaffPage',\r\n  filters: {\r\n    rolesFilter(val, roles) {\r\n      let role = roles.filter( r => parseInt(val) == r.id);\r\n      if (role && role.length !== 0 ) {\r\n          return role[0].roleName;\r\n      }\r\n      return \"\";\r\n    }\r\n  },\r\n  data() {\r\n    const validatePass = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请输入密码'));\r\n            } else {\r\n                if (this.staff.userPwd2 !== '') {\r\n                    // 对第二个密码框单独验证\r\n                    this.$refs.staffForm.validateField('userPwd2');\r\n                }\r\n                callback();\r\n            }\r\n        };\r\n    const validatePassCheck = (rule, value, callback) => {\r\n        if (value === '') {\r\n            callback(new Error('请再次输入密码'));\r\n        } else if (value !== this.staff.userPwd) {\r\n            callback(new Error('两次密码不一样'));\r\n        } else {\r\n            callback();\r\n        }\r\n    };\r\n    return {\r\n        staffs: [],\r\n        staff: {\r\n            realName: '',\r\n            mobileNum: '',\r\n            userSex: '',\r\n            userPwd: '',\r\n            userPwd2: '',\r\n            roles: [],\r\n        },\r\n        staffModal: false,\r\n        rolesList: [],\r\n        staffLoad: false,\r\n        staffRule: {\r\n            realName: [\r\n                { required: true, message: '请输入真实姓名',}\r\n            ],\r\n            mobileNum: [\r\n                { required: true, message: '请输入手机号', },\r\n            ],\r\n            userSex: [\r\n                { required: true, message: '请选择性别', },\r\n            ],\r\n            userPwd: [\r\n                 { validator: validatePass, },\r\n            ],\r\n            userPwd2: [\r\n               { validator: validatePassCheck, },\r\n            ],\r\n            roles: [\r\n                { required: true, message: '请选择角色', },\r\n            ],\r\n        },\r\n        staffCol:[ \r\n            {\r\n            type: 'index',\r\n            title: '序号',\r\n            width: 60\r\n        },\r\n        {\r\n            title: '姓名',\r\n            key: 'realName',\r\n            width: 150\r\n        },\r\n        {\r\n            title: '手机号',\r\n            key: 'mobileNum',\r\n            width: 150\r\n        },\r\n        {\r\n            title: '角色',\r\n            slot: 'role',\r\n            width: 250\r\n        },\r\n        {\r\n            title: '操作',\r\n            slot: 'action',\r\n            // width: 150,\r\n            align: 'center'\r\n        },\r\n        \r\n        ]\r\n    }\r\n  },\r\n  mounted() {\r\n      this.getRoles();\r\n      this.getUserList();\r\n      \r\n  },\r\n  methods: {\r\n    openOrClose(val) {\r\n      if (!val) {\r\n        // this.$emit(\"order-print-close\");\r\n      } else {\r\n        // this.getRoles();\r\n      }\r\n    },\r\n    staffSubmit() {\r\n         this.$refs.staffForm.validate((valid) => {\r\n            if (valid) {\r\n                this.staffLoad = true;\r\n                addUser(this.staff).then(res => {\r\n                    if (res.data.code === 0) {\r\n                        this.staffModal  = false;\r\n                        this.staffLoad = false;\r\n                        this.$Message.secuss('员工添加成功');\r\n                        this.getUserList();\r\n                    } else {\r\n                        this.$Message.error(res.data.code + \"：\" + res.data.msg);\r\n                        this.staffLoad = false;\r\n                    }\r\n                });\r\n            } \r\n        })\r\n       \r\n    },\r\n    getUserList() {\r\n        getUsers().then(res => {\r\n            if (res.data.code === 0) {\r\n                this.staffs = res.data.data;\r\n            } else {\r\n                this.$Message.error(res.data.code + \"：\" + res.data.msg);\r\n            }\r\n        });\r\n    },\r\n    getRoles() {\r\n        getHotelRoles().then(res => {\r\n        if (res.data.code === 0) {\r\n          this.rolesList = res.data.data;\r\n        } else {\r\n          this.$Message.error(res.data.code + \"：\" + res.data.msg);\r\n        }\r\n      });\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaffPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StaffPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StaffPage.vue?vue&type=template&id=077a575c&\"\nimport script from \"./StaffPage.vue?vue&type=script&lang=js&\"\nexport * from \"./StaffPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","module.exports = require(\"core-js/library/fn/parse-int\");"],"sourceRoot":""}