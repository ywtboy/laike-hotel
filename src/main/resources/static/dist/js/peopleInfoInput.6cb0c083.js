(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["peopleInfoInput"],{"4e7f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("Row",[s("Col",{attrs:{span:1}},[s("Icon",{attrs:{type:"md-person",size:"28"}})],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("Input",{ref:"nameInput",staticStyle:{width:"120px"},attrs:{placeholder:"请输入姓名",icon:"ios-card"},model:{value:e.guest.guestName,callback:function(t){e.$set(e.guest,"guestName",t)},expression:"guest.guestName"}})],1)],1),s("Col",{attrs:{span:8}},[s("FormItem",[s("Input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入证件号"},on:{"on-change":function(t){return e.openGuestLog(e.guest.certificateNo)}},model:{value:e.guest.certificateNo,callback:function(t){e.$set(e.guest,"certificateNo",t)},expression:"guest.certificateNo"}},[s("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.guest.certificateType,callback:function(t){e.$set(e.guest,"certificateType",t)},expression:"guest.certificateType"}},[s("Option",{attrs:{value:"idcard"}},[e._v("身份证")]),s("Option",{attrs:{value:"other"}},[e._v("其它")])],1)],1)],1)],1),s("Col",{attrs:{span:5}},[s("FormItem",[s("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"手机号"},model:{value:e.guest.guestTel,callback:function(t){e.$set(e.guest,"guestTel",t)},expression:"guest.guestTel"}})],1)],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("DatePicker",{attrs:{type:"date","start-date":new Date("1990-01-01"),placeholder:"选择生日"},model:{value:e.guest.guestBirthday,callback:function(t){e.$set(e.guest,"guestBirthday",t)},expression:"guest.guestBirthday"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:1}},[e._v(" ")]),s("Col",{attrs:{span:4}},[s("FormItem",[s("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择性别"},model:{value:e.guest.guestSex,callback:function(t){e.$set(e.guest,"guestSex",t)},expression:"guest.guestSex"}},[s("Option",{attrs:{value:"male"}},[e._v("男")]),s("Option",{attrs:{value:"female"}},[e._v("女")])],1)],1)],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择民族"},model:{value:e.guest.guestNation,callback:function(t){e.$set(e.guest,"guestNation",t)},expression:"guest.guestNation"}},[s("Option",{attrs:{value:"汉"}},[e._v("汉")])],1)],1)],1),s("Col",{attrs:{span:10}},[s("FormItem",[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入地址"},model:{value:e.guest.guestAddress,callback:function(t){e.$set(e.guest,"guestAddress",t)},expression:"guest.guestAddress"}})],1)],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("Button",{attrs:{type:"primary",size:"small",shape:"circle",icon:"ios-card",loading:e.readCardload},on:{click:e.readCard}},[e._v("读卡")])],1)],1)],1)],1)])},o=[],r=s("9ffe"),l=s("f8b7"),n={name:"PeopleInfoInput",props:{parentIsOpen:Boolean},data(){return{readCardload:!1,guest:{guestName:null,guestTel:null,certificateType:"idcard",certificateNo:null,guestSex:null,guestNation:null,guestBirthday:null,guestAddress:null}}},watch:{parentIsOpen(e){e||this.close()},guest:{handler(e){this.$emit("get-data",e)},deep:!0}},methods:{readCard(){this.readCardload=!0,r["a"].read(e=>{console.log("retcode:",e.retcode),console.log("retmsg:",e.retmsg),console.log("errmsg:",e.errmsg),console.log("CardType:",e.CardType),this.openGuestLog(e.cardno),this.guest.guestName=e.name,this.guest.certificateNo=e.cardno,this.guest.guestBirthday=e.born,"男"==e.sex&&(this.guest.guestSex="male"),"女"==e.sex&&(this.guest.guestSex="female"),this.guest.guestNation=e.nation,this.guest.guestAddress=e.address,this.readCardload=!1})},close(){Object.assign(this.$data,this.$options.data()),this.$Notice.close("guestLog")},openGuestLog(e){console.log(e);let t={guestCertificateNo:e,sortBy:"gmtCreate",orderBy:"desc",page:1,limit:3};e&&Object(l["h"])(t).then(t=>{if(0===t.data.code){let s=t.data.data;this.$Notice.close("guestLog"),(null===s||s.length<=0)&&this.$Notice.info({name:"guestLog",duration:0,title:"此客人第一次入住！",desc:""}),s&&s.length>0&&this.$Notice.open({name:"guestLog",title:"客人 "+s[0].guestName+" 最近入住记录",duration:0,desc:e,render:e=>{return e("div",s.map(t=>{return e("p",{style:{paddingTop:"10px",fontWeight:"bold",fontSize:"14px"}},[t.roomName,"-"+t.roomTypeName+" ","daily"===t.orderTypeCode?"日租":"钟点"," "+t.roomPrice+"元 ",new Date(t.realInTime).toLocaleDateString()])}))}})}})}}},i=n,u=s("2877"),c=Object(u["a"])(i,a,o,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=peopleInfoInput.6cb0c083.js.map