(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["hotelSetting"],{1571:function(o,e,t){"use strict";t.r(e);var r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticStyle:{padding:"10px"}},[t("div",[t("Row",[t("Col",{attrs:{span:18}},[o._v(" ")]),t("Col",{attrs:{span:6,align:"right"}},[t("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"}},[o._v("\n        门店信息\n      ")]),t("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){o.roomTypeModal=!0,o.roomTypeTitle="添加房型"}}},[o._v("\n        添加房型\n      ")])],1)],1)],1),t("div",[t("Table",{attrs:{columns:o.roomTypeCol,data:o.roomTypes,stripe:"",loading:!1},scopedSlots:o._u([{key:"roomNo",fn:function(e){var r=e.row;return o._l(r.rooms,function(e,r){return t("a",{key:e.roomId,staticStyle:{"margin-right":"6px"}},[o._v(o._s(e.roomName))])})}},{key:"count",fn:function(e){var t=e.row;return[o._v("\n        "+o._s(t.rooms.length)+"\n      ")]}},{key:"action",fn:function(e){var r=e.row;return[t("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return o.openRoomTypeEditModal(r)}}},[o._v("修改")]),t("Button",{attrs:{type:"error",size:"small"}},[o._v("删除")])]}}])})],1),t("Modal",{attrs:{title:o.roomTypeTitle},on:{"on-visible-change":function(e){return o.resetForm("roomTypeForm",e)}},model:{value:o.roomTypeModal,callback:function(e){o.roomTypeModal=e},expression:"roomTypeModal"}},[t("Form",{ref:"roomTypeForm",attrs:{model:o.roomType,"label-width":80,rules:o.ruleroomType}},[t("FormItem",{attrs:{label:"房型名称",prop:"roomTypeName"}},[t("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入房型名称"},model:{value:o.roomType.roomTypeName,callback:function(e){o.$set(o.roomType,"roomTypeName",e)},expression:"roomType.roomTypeName"}})],1),t("FormItem",{attrs:{label:"房号",prop:"roomName"}},[o._l(o.roomType.rooms,function(e,r){return t("Input",{staticStyle:{width:"100px","padding-right":"4px","padding-bottom":"3px"},attrs:{placeholder:"输入房号",icon:"md-close"},on:{"on-click":function(e){return o.handleRemove(r)}},model:{value:e.roomName,callback:function(t){o.$set(e,"roomName",t)},expression:"room.roomName"}})}),t("Button",{attrs:{size:"small",shape:"circle",icon:"md-add"},on:{click:o.handleAdd}})],2),t("FormItem",{attrs:{label:"默认房价",prop:"roomTypePrice"}},[t("Input",{staticStyle:{width:"250px"},attrs:{number:"",prefix:"logo-yen",placeholder:"请输入默认房价"},model:{value:o.roomType.roomTypePrice,callback:function(e){o.$set(o.roomType,"roomTypePrice",e)},expression:"roomType.roomTypePrice"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("p",{staticStyle:{float:"left"},attrs:{align:"left"}},[t("Icon",{attrs:{type:"ios-information-circle-outline",size:16}}),o._v("\n        说明：点击\n        "),t("Icon",{attrs:{type:"md-add",size:"16"}}),o._v("\n        可以添加多个房号，点击\n        "),t("Icon",{attrs:{type:"md-close",size:"16"}}),o._v("\n        可删除房号\n      ")],1),t("Button",{attrs:{size:"large"},on:{click:function(e){o.roomTypeModal=!1}}},[o._v("取消")]),t("Button",{attrs:{type:"primary",size:"large",loading:o.loadroomType},on:{click:o.submitRoomType}},[o._v("确定")])],1)],1)],1)},m=[],s=(t("ac6a"),{roomTypeCol:[{type:"index",title:"序号",width:60},{title:"房型名称",key:"roomTypeName",width:150},{title:"默认房价",key:"roomTypePrice",width:150},{title:"数量",slot:"count",width:100},{title:"房号",slot:"roomNo"},{title:"操作",slot:"action",align:"center"}]}),a=t("420d"),i={name:"HotelSetting",data(){return{roomTypeCol:s.roomTypeCol,roomTypes:[],hotelNo:"622723001",roomTypeModal:!1,roomTypeTitle:"添加房型",roomType:{roomTypeId:null,roomTypeName:"",roomTypePrice:null,hotelNo:"",sortNo:99,rooms:[{roomName:"",roomNo:""}]},ruleroomType:{roomTypeName:[{required:!0,message:"请输入房型名称"}],roomTypePrice:[{required:!0,message:"请输入默认房价"},{type:"number",message:"必须是数字"}]},loadroomType:!1}},mounted(){this.getRoomTypeList()},methods:{getRoomTypeList(){Object(a["c"])().then(o=>{this.roomTypes=o.data.data})},submitRoomType(){console.log(this.roomType),this.$refs["roomTypeForm"].validate(o=>{if(o){this.loadroomType=!0,console.log("通过");let o="post";null!==this.roomType.roomTypeId&&(o="patch"),Object(a["a"])(this.roomType,o).then(o=>{0==o.data.code?(this.$Message.success(o.data.msg),this.roomTypeModal=!1,this.getRoomTypeList()):(this.$Message.error(o.data.code+": "+o.data.msg),this.loadroomType=!1)})}else this.$Message.error("请输入"),this.loadroomType=!1})},openRoomTypeEditModal(o){this.roomTypeTitle="修改房型",this.roomTypeModal=!0,this.roomType.roomTypeId=o.roomTypeId,this.roomType.roomTypeName=o.roomTypeName,this.roomType.roomTypePrice=o.roomTypePrice,this.roomType.rooms=[{roomName:"",roomNo:""}],o.rooms.forEach(o=>{this.roomType.rooms.push(o)}),console.log("房间：",this.roomType.rooms)},resetForm(o,e){e||(this.$refs[o].resetFields(),Object.assign(this.$data.roomType,this.$options.data().roomType),this.loadroomType=!1)},handleAdd(){this.roomType.rooms.push({roomName:"",roomNo:""})},handleRemove(o){console.log("shan除"+o),0==o&&1===this.roomType.rooms.length?this.$Message.error("这是最后一个啦！"):this.roomType.rooms.splice(o,1)}}},l=i,p=t("2877"),n=Object(p["a"])(l,r,m,!1,null,null,null);e["default"]=n.exports}}]);
//# sourceMappingURL=hotelSetting.e7bd9777.js.map