(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["hotelSetting"],{1571:function(o,e,t){"use strict";t.r(e);var r=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticStyle:{padding:"10px"}},[t("div",[t("Row",[t("Col",{attrs:{span:18}},[o._v(" ")]),t("Col",{attrs:{span:6,align:"right"}},[t("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"}},[o._v("\n        门店信息\n      ")]),t("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){o.roomTypeModal=!0,o.roomTypeTitle="添加房型"}}},[o._v("\n        添加房型\n      ")])],1)],1)],1),t("div",[t("Table",{attrs:{columns:o.roomTypeCol,data:o.roomTypes,stripe:"",loading:!1},scopedSlots:o._u([{key:"roomNo",fn:function(e){var r=e.row;return o._l(r.rooms,function(e,r){return t("a",{key:e.roomId,staticStyle:{"margin-right":"6px"}},[o._v(o._s(e.roomName))])})}},{key:"count",fn:function(e){var t=e.row;return[o._v("\n        "+o._s(t.rooms.length)+"\n      ")]}},{key:"action",fn:function(e){var r=e.row;return[t("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return o.openRoomTypeEditModal(r)}}},[o._v("修改")]),t("Button",{attrs:{type:"error",size:"small"}},[o._v("删除")])]}}])})],1),t("Modal",{attrs:{title:o.roomTypeTitle},on:{"on-visible-change":function(e){return o.resetForm("roomTypeForm",e)}},model:{value:o.roomTypeModal,callback:function(e){o.roomTypeModal=e},expression:"roomTypeModal"}},[t("Form",{ref:"roomTypeForm",attrs:{model:o.roomType,"label-width":80,rules:o.ruleroomType}},[t("FormItem",{attrs:{label:"房型名称",prop:"roomTypeName"}},[t("Input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入房型名称"},model:{value:o.roomType.roomTypeName,callback:function(e){o.$set(o.roomType,"roomTypeName",e)},expression:"roomType.roomTypeName"}})],1),t("FormItem",{attrs:{label:"房号",prop:"roomName"}},[o._l(o.roomType.rooms,function(e,r){return t("Input",{staticStyle:{width:"100px","padding-right":"4px","padding-bottom":"3px"},attrs:{placeholder:"输入房号",icon:"md-close"},on:{"on-click":function(e){return o.handleRemove(r)}},model:{value:e.roomName,callback:function(t){o.$set(e,"roomName",t)},expression:"room.roomName"}})}),t("Button",{attrs:{size:"small",shape:"circle",icon:"md-add"},on:{click:o.handleAdd}})],2),t("FormItem",{attrs:{label:"默认房价",prop:"roomTypePrice"}},[t("Input",{staticStyle:{width:"250px"},attrs:{number:"",prefix:"logo-yen",placeholder:"请输入默认房价"},model:{value:o.roomType.roomTypePrice,callback:function(e){o.$set(o.roomType,"roomTypePrice",e)},expression:"roomType.roomTypePrice"}})],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("p",{staticStyle:{float:"left"},attrs:{align:"left"}},[t("Icon",{attrs:{type:"ios-information-circle-outline",size:16}}),o._v("\n        说明：点击\n        "),t("Icon",{attrs:{type:"md-add",size:"16"}}),o._v("\n        可以添加多个房号，点击\n        "),t("Icon",{attrs:{type:"md-close",size:"16"}}),o._v("\n        可删除房号\n      ")],1),t("Button",{attrs:{size:"large"},on:{click:function(e){o.roomTypeModal=!1}}},[o._v("取消")]),t("Button",{attrs:{type:"primary",size:"large",loading:o.loadroomType},on:{click:o.submitRoomType}},[o._v("确定")])],1)],1)],1)},i=[],a=t("5176"),n=t.n(a),s=(t("ac6a"),{roomTypeCol:[{type:"index",title:"序号",width:60},{title:"房型名称",key:"roomTypeName",width:150},{title:"默认房价",key:"roomTypePrice",width:150},{title:"数量",slot:"count",width:100},{title:"房号",slot:"roomNo"},{title:"操作",slot:"action",align:"center"}]}),m=t("420d"),l={name:"HotelSetting",data:function(){return{roomTypeCol:s.roomTypeCol,roomTypes:[],hotelNo:"622723001",roomTypeModal:!1,roomTypeTitle:"添加房型",roomType:{roomTypeId:null,roomTypeName:"",roomTypePrice:null,hotelNo:"",sortNo:99,rooms:[{roomName:"",roomNo:""}]},ruleroomType:{roomTypeName:[{required:!0,message:"请输入房型名称"}],roomTypePrice:[{required:!0,message:"请输入默认房价"},{type:"number",message:"必须是数字"}]},loadroomType:!1}},mounted:function(){this.getRoomTypeList()},methods:{getRoomTypeList:function(){var o=this;Object(m["c"])().then(function(e){o.roomTypes=e.data.data})},submitRoomType:function(){var o=this;console.log(this.roomType),this.$refs["roomTypeForm"].validate(function(e){if(e){o.loadroomType=!0,console.log("通过");var t="post";null!==o.roomType.roomTypeId&&(t="patch"),Object(m["a"])(o.roomType,t).then(function(e){0==e.data.code?(o.$Message.success(e.data.msg),o.roomTypeModal=!1,o.getRoomTypeList()):(o.$Message.error(e.data.code+": "+e.data.msg),o.loadroomType=!1)})}else o.$Message.error("请输入"),o.loadroomType=!1})},openRoomTypeEditModal:function(o){var e=this;this.roomTypeTitle="修改房型",this.roomTypeModal=!0,this.roomType.roomTypeId=o.roomTypeId,this.roomType.roomTypeName=o.roomTypeName,this.roomType.roomTypePrice=o.roomTypePrice,this.roomType.rooms=[{roomName:"",roomNo:""}],o.rooms.forEach(function(o){e.roomType.rooms.push(o)}),console.log("房间：",this.roomType.rooms)},resetForm:function(o,e){e||(this.$refs[o].resetFields(),n()(this.$data.roomType,this.$options.data().roomType),this.loadroomType=!1)},handleAdd:function(){this.roomType.rooms.push({roomName:"",roomNo:""})},handleRemove:function(o){console.log("shan除"+o),0==o&&1===this.roomType.rooms.length?this.$Message.error("这是最后一个啦！"):this.roomType.rooms.splice(o,1)}}},p=l,c=t("2877"),y=Object(c["a"])(p,r,i,!1,null,null,null);e["default"]=y.exports},5176:function(o,e,t){o.exports=t("51b6")},"51b6":function(o,e,t){t("a3c3"),o.exports=t("584a").Object.assign},9306:function(o,e,t){"use strict";var r=t("c3a1"),i=t("9aa9"),a=t("355d"),n=t("241e"),s=t("335c"),m=Object.assign;o.exports=!m||t("294c")(function(){var o={},e={},t=Symbol(),r="abcdefghijklmnopqrst";return o[t]=7,r.split("").forEach(function(o){e[o]=o}),7!=m({},o)[t]||Object.keys(m({},e)).join("")!=r})?function(o,e){var t=n(o),m=arguments.length,l=1,p=i.f,c=a.f;while(m>l){var y,T=s(arguments[l++]),d=p?r(T).concat(p(T)):r(T),u=d.length,h=0;while(u>h)c.call(T,y=d[h++])&&(t[y]=T[y])}return t}:m},a3c3:function(o,e,t){var r=t("63b6");r(r.S+r.F,"Object",{assign:t("9306")})},ac6a:function(o,e,t){for(var r=t("cadf"),i=t("0d58"),a=t("2aba"),n=t("7726"),s=t("32e9"),m=t("84f2"),l=t("2b4c"),p=l("iterator"),c=l("toStringTag"),y=m.Array,T={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(T),u=0;u<d.length;u++){var h,f=d[u],g=T[f],v=n[f],S=v&&v.prototype;if(S&&(S[p]||s(S,p,y),S[c]||s(S,c,f),m[f]=y,g))for(h in r)S[h]||a(S,h,r[h],!0)}}}]);
//# sourceMappingURL=hotelSetting-legacy.46c79e63.js.map