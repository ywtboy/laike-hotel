(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["peopleInfoInput"],{"4e7f":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[s("Row",[s("Col",{attrs:{span:1}},[s("Icon",{attrs:{type:"md-person",size:"28"}})],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("Input",{ref:"nameInput",staticStyle:{width:"120px"},attrs:{placeholder:"请输入姓名",icon:"ios-card"},model:{value:e.guest.guestName,callback:function(t){e.$set(e.guest,"guestName",t)},expression:"guest.guestName"}})],1)],1),s("Col",{attrs:{span:8}},[s("FormItem",[s("Input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入证件号"},on:{"on-change":function(t){return e.openGuestLog(e.guest.certificateNo)}},model:{value:e.guest.certificateNo,callback:function(t){e.$set(e.guest,"certificateNo",t)},expression:"guest.certificateNo"}},[s("Select",{staticStyle:{width:"80px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.guest.certificateType,callback:function(t){e.$set(e.guest,"certificateType",t)},expression:"guest.certificateType"}},[s("Option",{attrs:{value:"idcard"}},[e._v("身份证")]),s("Option",{attrs:{value:"other"}},[e._v("其它")])],1)],1)],1)],1),s("Col",{attrs:{span:5}},[s("FormItem",[s("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"手机号"},model:{value:e.guest.guestTel,callback:function(t){e.$set(e.guest,"guestTel",t)},expression:"guest.guestTel"}})],1)],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("DatePicker",{attrs:{type:"date","start-date":new Date("1990-01-01"),placeholder:"选择生日"},model:{value:e.guest.guestBirthday,callback:function(t){e.$set(e.guest,"guestBirthday",t)},expression:"guest.guestBirthday"}})],1)],1)],1),s("Row",[s("Col",{attrs:{span:1}},[e._v(" ")]),s("Col",{attrs:{span:4}},[s("FormItem",[s("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择性别"},model:{value:e.guest.guestSex,callback:function(t){e.$set(e.guest,"guestSex",t)},expression:"guest.guestSex"}},[s("Option",{attrs:{value:"male"}},[e._v("男")]),s("Option",{attrs:{value:"female"}},[e._v("女")])],1)],1)],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择民族"},model:{value:e.guest.guestNation,callback:function(t){e.$set(e.guest,"guestNation",t)},expression:"guest.guestNation"}},[s("Option",{attrs:{value:"汉"}},[e._v("汉")])],1)],1)],1),s("Col",{attrs:{span:10}},[s("FormItem",[s("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入地址"},model:{value:e.guest.guestAddress,callback:function(t){e.$set(e.guest,"guestAddress",t)},expression:"guest.guestAddress"}})],1)],1),s("Col",{attrs:{span:4}},[s("FormItem",[s("Button",{attrs:{type:"primary",size:"small",shape:"circle",icon:"ios-card",loading:e.readCardload},on:{click:e.readCard}},[e._v("读卡")])],1)],1)],1)],1)])},o=[],n=s("5176"),r=s.n(n),l=(s("7f7f"),s("9ffe")),u=s("f8b7"),i={name:"PeopleInfoInput",props:{parentIsOpen:Boolean},data:function(){return{readCardload:!1,guest:{guestName:null,guestTel:null,certificateType:"idcard",certificateNo:null,guestSex:null,guestNation:null,guestBirthday:null,guestAddress:null}}},watch:{parentIsOpen:function(e){e||this.close()},guest:{handler:function(e){this.$emit("get-data",e)},deep:!0}},methods:{readCard:function(){var e=this;this.readCardload=!0,l["a"].read(function(t){console.log("retcode:",t.retcode),console.log("retmsg:",t.retmsg),console.log("errmsg:",t.errmsg),console.log("CardType:",t.CardType),e.openGuestLog(t.cardno),e.guest.guestName=t.name,e.guest.certificateNo=t.cardno,e.guest.guestBirthday=t.born,"男"==t.sex&&(e.guest.guestSex="male"),"女"==t.sex&&(e.guest.guestSex="female"),e.guest.guestNation=t.nation,e.guest.guestAddress=t.address,e.readCardload=!1})},close:function(){r()(this.$data,this.$options.data()),this.$Notice.close("guestLog")},openGuestLog:function(e){var t=this;console.log(e);var s={guestCertificateNo:e,sortBy:"gmtCreate",orderBy:"desc",page:1,limit:3};e&&Object(u["h"])(s).then(function(s){if(0===s.data.code){var a=s.data.data;t.$Notice.close("guestLog"),(null===a||a.length<=0)&&t.$Notice.info({name:"guestLog",duration:0,title:"此客人第一次入住！",desc:""}),a&&a.length>0&&t.$Notice.open({name:"guestLog",title:"客人 "+a[0].guestName+" 最近入住记录",duration:0,desc:e,render:function(e){return e("div",a.map(function(t){return e("p",{style:{paddingTop:"10px",fontWeight:"bold",fontSize:"14px"}},[t.roomName,"-"+t.roomTypeName+" ","daily"===t.orderTypeCode?"日租":"钟点"," "+t.roomPrice+"元 ",new Date(t.realInTime).toLocaleDateString()])}))}})}})}}},c=i,d=s("2877"),g=Object(d["a"])(c,a,o,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=peopleInfoInput-legacy.a84f5d3d.js.map