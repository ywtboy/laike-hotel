{"version":3,"sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/date/now.js","webpack:///./node_modules/core-js/library/modules/es6.date.now.js","webpack:///./node_modules/core-js/library/fn/date/now.js","webpack:///./src/components/hotel/order/OrderReserve.vue?2b61","webpack:///src/components/hotel/order/OrderReserve.vue","webpack:///./src/components/hotel/order/OrderReserve.vue?11b8","webpack:///./src/components/hotel/order/OrderReserve.vue"],"names":["module","exports","__webpack_require__","$export","S","now","Date","getTime","render","_vm","this","_h","$createElement","_c","_self","attrs","width","title","mask-closable","on","on-visible-change","openOrClose","model","value","callback","$$v","isOpen","expression","parent-is-open","get-data","getPeopleData","staticClass","size","_l","item","index","key","span","type","staticStyle","filterable","placeholder","on-change","$event","setRoomTypeInfo","$set","v","roomTypeId","_v","_s","roomTypeName","max","min","formatter","parser","replace","prefix","number","placement","format","startFormat","options","inOptions","setOutTime","estimateInTime","day","endFormat","outOptions","setDay","estimateOutTime","icon","click","handleAdd","directives","name","rawName","orderReserves","length","handleRemove","_e","channelChange","order","dicCommonCode","dicCommonName","get-money","getMoney","slot","loading","reserveLoad","submit","staticRenderFns","OrderReservevue_type_script_lang_js_","props","openIs","Boolean","components","PeopleInfoInput","e","then","bind","PayDetail","Promise","resolve","data","orderIncome","incomeMoney","incomeTypeCode","incomeComment","payDetails","guest","guestName","guestTel","certificateType","certificateNo","guestSex","guestNation","guestBirthday","guestAddress","roomTypePrice","reserveNum","guestCertificateNo","orderTypeCode","channelCode","payTypeCode","orderComment","clientTypeCode","defaultDay","checkOutHour","businessDayEndHour","disabledDate","date","valueOf","now_default","outDisabledDateTemp","computed","Object","objectSpread","vuex_esm","roomTypes","state","room","channel","dic","watch","_openIs","methods","val","loadRoomTypes","getCheckOutTime","$emit","assign_default","$data","$options","inTime","event","i","outTime","getDate","curr","toDateString","setHours","push","pop","_this","roomType","filter","_this2","guests","json","res","code","console","log","$Message","success","error","msg","isHour","current","getHours","setDate","setMinutes","setSeconds","setMilliseconds","order_OrderReservevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/orderReserve-legacy.0bb7eb18.js","sourcesContent":["module.exports = require(\"core-js/library/fn/date/now\");","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","require('../../modules/es6.date.now');\nmodule.exports = require('../../modules/_core').Date.now;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Modal',{attrs:{\"width\":\"800\",\"title\":\"订单预订\",\"mask-closable\":false},on:{\"on-visible-change\":_vm.openOrClose},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('Form',[_c('PeopleInfoInput',{attrs:{\"parent-is-open\":_vm.isOpen},on:{\"get-data\":_vm.getPeopleData}}),_c('Divider',{staticClass:\"myHr\",attrs:{\"size\":\"default\"}}),_c('div',_vm._l((_vm.orderReserves),function(item,index){return _c('Row',{key:index},[_c('Col',{attrs:{\"span\":1}},[_c('Icon',{attrs:{\"type\":\"md-home\",\"size\":\"28\"}})],1),_c('Col',{attrs:{\"span\":4}},[_c('FormItem',[_c('Select',{staticStyle:{\"width\":\"120px\"},attrs:{\"filterable\":\"\",\"placeholder\":\"选择房型\"},on:{\"on-change\":function($event){return _vm.setRoomTypeInfo(index)}},model:{value:(item.roomTypeId),callback:function ($$v) {_vm.$set(item, \"roomTypeId\", $$v)},expression:\"item.roomTypeId\"}},_vm._l((_vm.roomTypes),function(v){return _c('Option',{key:v.roomTypeId,attrs:{\"value\":v.roomTypeId}},[_vm._v(_vm._s(v.roomTypeName)+\"\\n              \")])}),1)],1)],1),_c('Col',{attrs:{\"span\":4}},[_c('FormItem',[_c('InputNumber',{attrs:{\"max\":100,\"min\":1,\"placeholder\":\"预订间数\",\"formatter\":function (value) { return (value + \" 间\"); },\"parser\":function (value) { return value.replace(' 间', ''); }},model:{value:(item.reserveNum),callback:function ($$v) {_vm.$set(item, \"reserveNum\", $$v)},expression:\"item.reserveNum\"}})],1)],1),_c('Col',{attrs:{\"span\":4}},[_c('FormItem',[_c('Input',{staticStyle:{\"width\":\"120px\"},attrs:{\"prefix\":\"logo-yen\",\"placeholder\":\"请输入房价\",\"number\":\"\"},model:{value:(item.roomTypePrice),callback:function ($$v) {_vm.$set(item, \"roomTypePrice\", $$v)},expression:\"item.roomTypePrice\"}})],1)],1),_c('Col',{attrs:{\"span\":6}},[_c('FormItem',[_c('DatePicker',{staticStyle:{\"width\":\"75px\"},attrs:{\"type\":\"date\",\"placement\":\"bottom-end\",\"placeholder\":\"时间\",\"format\":_vm.startFormat,\"options\":_vm.inOptions},on:{\"on-change\":function($event){return _vm.setOutTime(index,item.estimateInTime, item.day)}},model:{value:(item.estimateInTime),callback:function ($$v) {_vm.$set(item, \"estimateInTime\", $$v)},expression:\"item.estimateInTime\"}}),_vm._v(\"--\\n            \"),_c('DatePicker',{staticStyle:{\"width\":\"75px\"},attrs:{\"type\":\"date\",\"placement\":\"bottom-end\",\"placeholder\":\"时间\",\"format\":_vm.endFormat,\"options\":_vm.outOptions(item.estimateInTime)},on:{\"on-change\":function($event){return _vm.setDay(index,item.estimateOutTime)}},model:{value:(item.estimateOutTime),callback:function ($$v) {_vm.$set(item, \"estimateOutTime\", $$v)},expression:\"item.estimateOutTime\"}})],1)],1),_c('Col',{attrs:{\"span\":3}},[_c('FormItem',[_c('InputNumber',{attrs:{\"max\":100,\"min\":1,\"formatter\":function (value) { return (value + \" 晚\"); },\"parser\":function (value) { return value.replace(' 晚', ''); }},on:{\"on-change\":function($event){return _vm.setOutTime(index,item.estimateInTime, $event)}},model:{value:(item.day),callback:function ($$v) {_vm.$set(item, \"day\", $$v)},expression:\"item.day\"}})],1)],1),_c('Col',{attrs:{\"span\":2}},[(0 === index)?_c('FormItem',[_c('Button',{attrs:{\"type\":\"error\",\"icon\":\"md-add\",\"size\":\"small\"},on:{\"click\":_vm.handleAdd}}),_vm._v(\" \\n            \"),_c('Button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.orderReserves.length > 1),expression:\"orderReserves.length > 1\"}],attrs:{\"type\":\"error\",\"icon\":\"md-remove\",\"size\":\"small\"},on:{\"click\":_vm.handleRemove}})],1):_vm._e()],1)],1)}),1),_c('Divider',{staticClass:\"myHr\",attrs:{\"size\":\"default\"}}),_c('div',[_c('Row',[_c('Col',{attrs:{\"span\":1}},[_c('Icon',{attrs:{\"type\":\"md-arrow-forward\",\"size\":\"28\"}})],1),_c('Col',{attrs:{\"span\":4}},[_c('FormItem',[_c('Select',{staticStyle:{\"width\":\"120px\"},attrs:{\"placeholder\":\"请选择渠道\"},on:{\"on-change\":_vm.channelChange},model:{value:(_vm.order.channelCode),callback:function ($$v) {_vm.$set(_vm.order, \"channelCode\", $$v)},expression:\"order.channelCode\"}},_vm._l((_vm.channel),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item.dicCommonCode}},[_vm._v(\"\\n                \"+_vm._s(item.dicCommonName))])}),1)],1)],1),_c('Col',{attrs:{\"span\":8}},[_c('FormItem',[_c('Select',{staticStyle:{\"width\":\"120px\"},model:{value:(_vm.order.payTypeCode),callback:function ($$v) {_vm.$set(_vm.order, \"payTypeCode\", $$v)},expression:\"order.payTypeCode\"}},[_c('Option',{attrs:{\"value\":\"spot_pay\"}},[_vm._v(\"现付\")]),_c('Option',{attrs:{\"value\":\"advance_pay\"}},[_vm._v(\"预付\")])],1)],1)],1)],1)],1),_c('Divider',{staticClass:\"myHr\",attrs:{\"size\":\"default\"}}),_c('div',[_c('PayDetail',{attrs:{\"parent-is-open\":_vm.isOpen},on:{\"get-money\":_vm.getMoney}}),_c('FormItem',[_c('Input',{attrs:{\"placeholder\":\"输入备注\",\"type\":\"textarea\"},model:{value:(_vm.order.orderComment),callback:function ($$v) {_vm.$set(_vm.order, \"orderComment\", $$v)},expression:\"order.orderComment\"}})],1)],1)],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"large\"},on:{\"click\":function($event){_vm.isOpen = false;}}},[_vm._v(\"取消\")]),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\",\"loading\":_vm.reserveLoad},on:{\"click\":_vm.submit}},[_vm._v(\"确定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Modal\r\n      width=\"800\"\r\n      v-model=\"isOpen\"\r\n      title=\"订单预订\"\r\n      :mask-closable=\"false\"\r\n      @on-visible-change=\"openOrClose\"\r\n    >\r\n      <Form>\r\n        <PeopleInfoInput\r\n          :parent-is-open=\"isOpen\"\r\n          @get-data=\"getPeopleData\"\r\n        />\r\n        <Divider\r\n          size=\"default\"\r\n          class=\"myHr\"\r\n        />\r\n        <div>\r\n          <Row\r\n            v-for=\"(item, index) in orderReserves\"\r\n            :key=\"index\"\r\n          >\r\n            <Col :span=\"1\">\r\n            <Icon\r\n              type=\"md-home\"\r\n              size=\"28\"\r\n            />\r\n            </Col>\r\n            <Col :span=\"4\">\r\n            <FormItem>\r\n              <Select\r\n                v-model=\"item.roomTypeId\"\r\n                filterable\r\n                style=\"width: 120px\"\r\n                placeholder=\"选择房型\"\r\n                @on-change=\"setRoomTypeInfo(index)\"\r\n              >\r\n                <Option\r\n                  v-for=\"v in roomTypes\"\r\n                  :value=\"v.roomTypeId\"\r\n                  :key=\"v.roomTypeId\"\r\n                >{{ v.roomTypeName }}\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            </Col>\r\n            <Col :span=\"4\">\r\n            <FormItem>\r\n              <InputNumber\r\n                :max=\"100\"\r\n                :min=\"1\"\r\n                placeholder=\"预订间数\"\r\n                v-model=\"item.reserveNum\"\r\n                :formatter=\"value => `${value} 间`\"\r\n                :parser=\"value => value.replace(' 间', '')\"\r\n              ></InputNumber>\r\n            </FormItem>\r\n            </Col>\r\n            <Col :span=\"4\">\r\n            <FormItem>\r\n              <Input\r\n                v-model=\"item.roomTypePrice\"\r\n                prefix=\"logo-yen\"\r\n                placeholder=\"请输入房价\"\r\n                number\r\n                style=\"width: 120px\"\r\n              />\r\n            </FormItem>\r\n            </Col>\r\n            <Col :span=\"6\">\r\n            <FormItem>\r\n              <DatePicker\r\n                v-model=\"item.estimateInTime\"\r\n                type=\"date\"\r\n                placement=\"bottom-end\"\r\n                placeholder=\"时间\"\r\n                :format=\"startFormat\"\r\n                style=\"width: 75px\"\r\n                :options=\"inOptions\"\r\n                @on-change=\"setOutTime(index,item.estimateInTime, item.day)\"\r\n              ></DatePicker>--\r\n              <DatePicker\r\n                v-model=\"item.estimateOutTime\"\r\n                type=\"date\"\r\n                placement=\"bottom-end\"\r\n                placeholder=\"时间\"\r\n                :format=\"endFormat\"\r\n                style=\"width: 75px\"\r\n                :options=\"outOptions(item.estimateInTime)\"\r\n                @on-change=\"setDay(index,item.estimateOutTime)\"\r\n              ></DatePicker>\r\n            </FormItem>\r\n            </Col>\r\n            <Col :span=\"3\">\r\n            <FormItem>\r\n              <InputNumber\r\n                :max=\"100\"\r\n                :min=\"1\"\r\n                v-model=\"item.day\"\r\n                :formatter=\"value => `${value} 晚`\"\r\n                :parser=\"value => value.replace(' 晚', '')\"\r\n                @on-change=\"setOutTime(index,item.estimateInTime, $event)\"\r\n              ></InputNumber>\r\n\r\n            </FormItem>\r\n            </Col>\r\n            <Col :span=\"2\">\r\n            <FormItem v-if=\"0 === index\">\r\n              <Button\r\n                type=\"error\"\r\n                icon=\"md-add\"\r\n                size=\"small\"\r\n                @click=\"handleAdd\"\r\n              ></Button>&nbsp;\r\n              <Button\r\n                v-show=\"orderReserves.length > 1\"\r\n                type=\"error\"\r\n                icon=\"md-remove\"\r\n                size=\"small\"\r\n                @click=\"handleRemove\"\r\n              ></Button>\r\n            </FormItem>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n        <Divider\r\n          size=\"default\"\r\n          class=\"myHr\"\r\n        />\r\n        <div>\r\n          <Row>\r\n            <Col :span=\"1\">\r\n            <Icon\r\n              type=\"md-arrow-forward\"\r\n              size=\"28\"\r\n            />\r\n            </Col>\r\n            <Col :span=\"4\">\r\n            <FormItem>\r\n              <Select\r\n                v-model=\"order.channelCode\"\r\n                style=\"width: 120px\"\r\n                @on-change=\"channelChange\"\r\n                placeholder=\"请选择渠道\"\r\n              >\r\n                <Option\r\n                  v-for=\"(item, index) in channel\"\r\n                  :key=\"index\"\r\n                  :value=\"item.dicCommonCode\"\r\n                >\r\n                  {{ item.dicCommonName }}</Option>\r\n              </Select>\r\n            </FormItem>\r\n            </Col>\r\n\r\n            <Col :span=\"8\">\r\n            <FormItem>\r\n              <Select\r\n                v-model=\"order.payTypeCode\"\r\n                style=\"width: 120px\"\r\n              >\r\n                <Option value=\"spot_pay\">现付</Option>\r\n                <Option value=\"advance_pay\">预付</Option>\r\n              </Select>\r\n            </FormItem>\r\n            </Col>\r\n          </Row>\r\n\r\n        </div>\r\n        <Divider\r\n          size=\"default\"\r\n          class=\"myHr\"\r\n        />\r\n        <div>\r\n          <PayDetail\r\n            :parent-is-open=\"isOpen\"\r\n            @get-money=\"getMoney\"\r\n          ></PayDetail>\r\n          <FormItem>\r\n            <Input\r\n              v-model=\"order.orderComment\"\r\n              placeholder=\"输入备注\"\r\n              type=\"textarea\"\r\n            ></Input>\r\n          </FormItem>\r\n        </div>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button\r\n          size=\"large\"\r\n          @click=\"isOpen = false;\"\r\n        >取消</Button>\r\n        <Button\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          :loading=\"reserveLoad\"\r\n          @click=\"submit\"\r\n        >确定</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions, mapGetters } from \"vuex\";\r\nimport { reserve } from \"@/api/order.js\";\r\nexport default {\r\n  name: \"OrderReserve\",\r\n  props: {\r\n    openIs: Boolean\r\n  },\r\n  components: {\r\n    PeopleInfoInput: () =>\r\n      import(/* webpackChunkName: \"peopleInfoInput\" */ \"@/components/common/PeopleInfoInput.vue\"),\r\n    PayDetail: () =>\r\n      import(/* webpackChunkName: \"payDetail\" */ \"@/components/common/PayDetail.vue\")\r\n  },\r\n  data() {\r\n    return {\r\n      isOpen: false,\r\n      orderIncome: {\r\n        incomeMoney: 0,\r\n        incomeTypeCode: \"income\",\r\n        incomeComment: null,\r\n        payDetails: []\r\n      },\r\n      guest: {\r\n        guestName: null,\r\n        guestTel: null,\r\n        certificateType: \"idcard\",\r\n        certificateNo: null,\r\n        guestSex: null,\r\n        guestNation: null,\r\n        guestBirthday: null,\r\n        guestAddress: null\r\n      },\r\n      orderReserves: [\r\n        {\r\n          roomTypeId: null,\r\n          roomTypeName: null,\r\n          roomTypePrice: null,\r\n          reserveNum: 1,\r\n          estimateInTime: new Date(),\r\n          estimateOutTime: null,\r\n          day: 1\r\n        }\r\n      ],\r\n      order: {\r\n        guestName: \"\",\r\n        guestTel: \"\",\r\n        guestCertificateNo: \"\",\r\n        // 日租/钟点\r\n        orderTypeCode: \"daily\",\r\n        channelCode: \"\",\r\n        payTypeCode: \"spot_pay\",\r\n        orderComment: null,\r\n        clientTypeCode: \"web\"\r\n      },\r\n      reserveLoad: false,\r\n      startFormat: \"MM-dd\",\r\n      endFormat: \"MM-dd HH:mm\",\r\n      defaultDay: 1,\r\n      checkOutHour: 12,\r\n      businessDayEndHour: 6,\r\n      inOptions: {\r\n        disabledDate(date) {\r\n          return date && date.valueOf() < Date.now() - 86400000;\r\n        }\r\n      },\r\n      outDisabledDateTemp: Date.now() - 86400000,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      roomTypes: state => state.room.roomTypes,\r\n      channel: state => state.dic.channel\r\n    })\r\n  },\r\n  watch: {\r\n    openIs(openIs) {\r\n      this.isOpen = openIs;\r\n    }\r\n  },\r\n  methods: {\r\n    openOrClose(val) {\r\n      if (!val) {\r\n        this.$emit(\"order-reserve-close\");\r\n        Object.assign(this.$data, this.$options.data());\r\n      } else {\r\n        this.loadRoomTypes();\r\n        this.orderReserves[0].estimateOutTime = this.getCheckOutTime(\r\n          false,\r\n          new Date(),\r\n          1\r\n        );\r\n      }\r\n    },\r\n    outOptions(inTime){\r\n        const disabledDate = date => {\r\n          return date && date.valueOf() < inTime.valueOf();\r\n        };\r\n        return { disabledDate };\r\n      },\r\n    getPeopleData(event) {\r\n      this.guest = event;\r\n    },\r\n    getMoney(event) {\r\n      this.orderIncome = event;\r\n    },\r\n    setDay(i, outTime) {\r\n      this.orderReserves[i].day = outTime.getDate() - this.orderReserves[i].estimateInTime.getDate();\r\n    },\r\n    setOutTime(i, inTime, day) {\r\n      let curr = new Date();\r\n      if (curr.toDateString() === inTime.toDateString()) {\r\n        inTime = curr;\r\n      } else {\r\n        inTime.setHours(this.businessDayEndHour);\r\n      }\r\n      this.orderReserves[i].estimateOutTime = this.getCheckOutTime(\r\n        false,\r\n        inTime,\r\n        day\r\n      );\r\n    },\r\n    handleAdd() {\r\n      this.orderReserves.push({\r\n        roomTypeId: null,\r\n        roomTypeName: null,\r\n        roomTypePrice: null,\r\n        reserveNum: 1,\r\n\r\n        // 预计入住时间\r\n        estimateInTime: new Date(),\r\n        // 预计推翻时间\r\n        estimateOutTime: this.getCheckOutTime(false, new Date(), 1),\r\n        day: 1\r\n      });\r\n    },\r\n    handleRemove() {\r\n      if (this.orderReserves.length > 1) {\r\n        this.orderReserves.pop();\r\n      }\r\n    },\r\n    setRoomTypeInfo(i) {\r\n      let roomType = this.roomTypes.filter(\r\n        roomType => roomType.roomTypeId === this.orderReserves[i].roomTypeId\r\n      );\r\n      if (roomType && roomType.length > 0) {\r\n        this.orderReserves[i].roomTypeName = roomType[0].roomTypeName;\r\n        this.orderReserves[i].roomTypePrice = roomType[0].roomTypePrice;\r\n      }\r\n    },\r\n    submit() {\r\n      this.reserveLoad = true;\r\n      this.order.guestName = this.guest.guestName;\r\n      let guests = [this.guest];\r\n      let json = {\r\n        order: this.order,\r\n        orderReserves: this.orderReserves,\r\n        orderIncome: this.orderIncome,\r\n        guests: guests\r\n      };\r\n      reserve(json).then(res => {\r\n        if (res.data.code === 0) {\r\n          console.log(res.data.data);\r\n\r\n          this.isOpen = false;\r\n          this.$Message.success(\"预订成功\");\r\n        } else {\r\n          this.$Message.error(res.data.code + \"：\" + res.data.msg);\r\n          this.reserveLoad = false;\r\n        }\r\n      });\r\n    },\r\n    getCheckOutTime(isHour, inTime, length) {\r\n      let current = new Date(inTime);\r\n      console.log(\"ssd--\", current);\r\n\r\n      if (isHour) {\r\n        current.setHours(current.getHours() + length);\r\n      } else {\r\n        // if (current.getHours() >= this.businessDayEndHour) {\r\n        current.setDate(current.getDate() + length);\r\n        // }\r\n        current.setHours(this.checkOutHour);\r\n        current.setMinutes(0);\r\n        current.setSeconds(0);\r\n        current.setMilliseconds(0);\r\n      }\r\n\r\n      return current;\r\n    },\r\n    channelChange(val) {\r\n      if (val === \"offline\") {\r\n        this.order.payTypeCode = \"spot_pay\";\r\n      } else {\r\n        this.order.payTypeCode = \"advance_pay\";\r\n      }\r\n    },\r\n    ...mapActions([\"loadRoomTypes\"])\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderReserve.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderReserve.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderReserve.vue?vue&type=template&id=1780c136&\"\nimport script from \"./OrderReserve.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderReserve.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}